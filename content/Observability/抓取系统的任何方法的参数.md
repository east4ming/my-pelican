Title: 抓取系统中的任何方法的参数值
Status: published
Tags: Dynatrace, Observability, 最佳实践
Author: 东风微鸣
Date: 2019-07-03 22:48
Slug: capture-any-method-param-value
Summary: Dynatrace 也可以抓取运行的系统中的任何方法的参数值. 抓取这个, 一方面是该参数值可能会表明一些关键信息(如: 机构代码, 保单号, 入参传参...), 便于针对性分析问题; 另一方面也可以对业务相关的参数抓取后进行整合分析, 如实时保单金额总数...
Image: /images/421814-dynatrace-logo.jpg

## 概述

Dynatrace 也可以抓取运行的系统中的任何方法的参数值. 抓取这个, 一方面是该参数值可能会表明一些关键信息(如: 机构代码, 保单号, 入参传参...), 便于针对性分析问题; 另一方面也可以对业务相关的参数抓取后进行整合分析, 如实时保单金额总数...

## 具体步骤

> 📓 备注:
>
> 可以参考上一篇文章链接 [非HTTP应用或批处理应用如何进行全链路监控]({filename}./非HTTP应用或批处理应用如何进行全链路监控.md)

要抓取指定方法的参数, 首先肯定知道方法是什么; 

然后将该方法添加到Dynatrace 的传感器规则. 如下:

![](./images/dt_edit_method_rule_2.png)

如上图, Dynatrace会自动获取到该方法有6个参数, 前三个参数是String类型, 第4个是double, 后边2个是string类型. 如果要捕获哪一个参数, 就勾选第二列**Capture** 的勾选框就可以了. 

勾选确定后, 还是热部署或者重启生效.

假如第四个参数是保单金额, 那么每一笔事务, 就能直接在Dynatrace 上看到该笔事务的保单金额了. 

最终效果如下:

这是一个在线旅游网站的demo. 可以实时获取到该笔事务`BookingService` 方法的:

- 信用卡号;
- 邮箱;
- 预定金额;
- 出发地
- 目的地

![](./images/dt-method-parms.jpg)

就是这么简单. :smile_cat::smile_cat::smile_cat: